# 🔍 診斷空白網頁問題

## 問題描述

訪問 `https://ai-nutritionist-tracker-production.up.railway.app/` 顯示空白網頁。

## 🔍 可能的原因

### 1. 服務可能已停止

從日誌看到 "Stopping Container"，服務可能已經停止。

**檢查方法**：
1. 在 Railway 中，點擊服務 `ai-nutritionist-tracker`
2. 查看服務狀態：
   - 應該是 **"Active"**（綠色）
   - 如果是 **"Inactive"** 或 **"Stopped"**，需要重新啟動

**解決方法**：
- 如果服務已停止，Railway 應該會自動重新啟動
- 或者手動觸發重新部署：
  1. 點擊 "Deployments" 標籤
  2. 點擊最新的部署
  3. 點擊 "Redeploy"

---

### 2. 服務正在啟動中

服務可能正在啟動，需要等待幾分鐘。

**檢查方法**：
1. 在 Railway 中，點擊服務 → "Deploy Logs" 標籤
2. 查看最新的日誌：
   - 應該看到 "server running" 訊息
   - 如果看到錯誤，請複製錯誤訊息

---

### 3. 端口配置問題

Railway 可能沒有正確設置端口。

**檢查方法**：
1. 在 Railway 中，點擊服務 → "Variables" 標籤
2. 確認是否有 `PORT` 變數（Railway 通常會自動設置）
3. 如果沒有，檢查 "Settings" → "Domains" 中的端口配置

---

### 4. 應用程序錯誤

後端代碼可能有錯誤導致服務無法啟動。

**檢查方法**：
1. 在 Railway 中，點擊服務 → "Deploy Logs" 標籤
2. 查看是否有錯誤訊息：
   - 紅色錯誤訊息
   - 應用程序崩潰訊息
   - 數據庫連接錯誤

---

## 🔧 診斷步驟

### 步驟 1：檢查服務狀態

1. **在 Railway 中**：
   - 點擊服務 `ai-nutritionist-tracker`
   - 查看頂部狀態：
     - ✅ **"Active"**（綠色）= 服務正在運行
     - ❌ **"Inactive"** 或 **"Stopped"** = 服務已停止

2. **如果服務已停止**：
   - 點擊 "Deployments" 標籤
   - 點擊最新的部署
   - 點擊 "Redeploy" 重新部署

---

### 步驟 2：檢查部署日誌

1. **在 Railway 中**：
   - 點擊服務 → "Deploy Logs" 標籤
   - 查看最新的日誌

2. **應該看到**：
   - ✅ "server running" 訊息
   - ✅ 沒有紅色錯誤訊息

3. **如果看到錯誤**：
   - 複製完整的錯誤訊息
   - 發送給我查看

---

### 步驟 3：測試 API 端點

1. **在瀏覽器打開**：
   ```
   https://ai-nutritionist-tracker-production.up.railway.app/
   ```

2. **應該看到**：
   ```json
   {
     "message": "NutriAI API Server",
     "status": "running",
     "version": "1.0.0",
     "endpoints": {
       ...
     }
   }
   ```

3. **如果還是空白**：
   - 按 F12 打開開發者工具
   - 點擊 "Network" 標籤
   - 刷新頁面
   - 查看是否有請求
   - 查看請求的狀態碼和響應

---

### 步驟 4：檢查環境變數

1. **在 Railway 中**：
   - 點擊服務 → "Variables" 標籤
   - 確認以下變數都已設置：
     - ✅ `API_KEY`
     - ✅ `JWT_SECRET`
     - ✅ `NODE_ENV` = `production`

2. **如果缺少變數**：
   - 添加缺少的變數
   - Railway 會自動重新部署

---

## 🛠️ 常見解決方法

### 方法 1：重新部署服務

1. 在 Railway 中，點擊服務
2. 點擊 "Deployments" 標籤
3. 點擊最新的部署
4. 點擊 "Redeploy" 按鈕
5. 等待部署完成（約 2-3 分鐘）

---

### 方法 2：檢查並修復環境變數

1. 確認所有必需的環境變數都已設置
2. 確認變數值正確（沒有多餘的空格）
3. 保存後，Railway 會自動重新部署

---

### 方法 3：查看詳細錯誤日誌

1. 在 Railway 中，點擊服務 → "Deploy Logs" 標籤
2. 查看是否有錯誤訊息
3. 複製錯誤訊息發送給我

---

## 📝 需要提供的信息

如果問題仍然存在，請提供：

1. **Railway 服務狀態**：
   - Active / Inactive / Stopped？

2. **部署日誌**：
   - 最新的日誌訊息
   - 是否有錯誤訊息？

3. **瀏覽器開發者工具**：
   - 按 F12 → Network 標籤
   - 刷新頁面
   - 截圖或複製請求的狀態碼和響應

4. **環境變數**：
   - 所有變數是否都已設置？
   - 變數值是否正確？

---

## 🎯 快速檢查清單

- [ ] Railway 服務狀態是 "Active"（綠色）
- [ ] 部署日誌顯示 "server running"
- [ ] 所有環境變數都已設置（API_KEY, JWT_SECRET, NODE_ENV）
- [ ] 瀏覽器可以訪問 URL（不是空白頁面）
- [ ] 瀏覽器開發者工具沒有顯示錯誤

